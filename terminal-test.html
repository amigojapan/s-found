<HTML>
<HEAD>
<script>
	function echo(output) {
		document.getElementById("term").value = document.getElementById("term").value +output + "\n";
		return "";//avoid showing undefined
		//for(var a=0;a<100;a++) echo("hello"+a+"\n");
	}
	var commands=[];
	var command_index;
	var command
	window.onload = function() {
		document.getElementById("txtPrompt").addEventListener("keyup", function(event) {
			event.preventDefault();
			if (event.keyCode == 13) {
				command=document.getElementById("txtPrompt").value
				commands.push(command);
				try {
					output= eval(command);
				}
				catch (e) {
				   echo(e);
				   return;
				}
				document.getElementById("term").value = document.getElementById("term").value + output;
				if(command.substring(0, 5)!="echo(") {//add a newlinee if the command is not echo
					document.getElementById("term").value = document.getElementById("term").value  + "\n";
				}
				document.getElementById("txtPrompt").value="";
				command_index=commands.lenght;
				//scroll to bottom
				var textarea = document.getElementById("term");
				textarea.scrollTop = textarea.scrollHeight;
			}
			if (event.keyCode == 38) {//up arrow
				if(typeof commands[command_index] == 'undefined') {
					command_index=commands.length-1;
				} else {
					if(command_index>0) {
						command_index--;
					}
				}
				document.getElementById("txtPrompt").value = commands[command_index];
			}
			if (event.keyCode == 40) {//down arrow
				if(typeof commands[command_index] == 'undefined') {
					command_index=commands.length-1;
				} else {
					if(command_index<commands.length-1) {
						command_index++;
					}
				}
				document.getElementById("txtPrompt").value = commands[command_index];
			}
		});
	};
	//-(done)I will make it just display the thrown exception when an error happensâ€¦.
	//-hide the terminal by default, make a "toggle terminal" button
	//-show the terminal automatically when an echo() command is used
	//-rename the echo block to alert and use the echo block for the termina
</script>
</HEAD>
<body>
	<div id="termDiv" style="overflow-y: auto; border:1px solid black; width: 400px">
		<textarea rows="15" cols="50" id="term" style="resize: none; height: 80px; max-height: 100px; width: 400px"></textarea>
		<BR><input type="text" id="txtPrompt" style="width: 400px" />
	</div>
</body>
